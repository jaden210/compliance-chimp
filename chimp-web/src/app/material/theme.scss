@use 'sass:map';
@use '@angular/material' as mat;

// ============================================================================
// CHIMP CUSTOM COLOR PALETTES
// ============================================================================

// Primary Blue Palette based on #054d8a
$chimp-blue-palette: (
  0: #000000,
  10: #001d36,
  20: #003258,
  25: #033d6a,
  30: #054d8a,
  35: #1a5a96,
  40: #2d68a3,
  50: #4a82be,
  60: #689cd9,
  70: #8ab7f0,
  80: #b0d3ff,
  90: #d6e8ff,
  95: #ecf4ff,
  98: #f8faff,
  99: #fdfcff,
  100: #ffffff,
  secondary: (
    0: #000000,
    10: #0f1d2b,
    20: #243241,
    25: #2f3d4c,
    30: #3a4858,
    35: #465464,
    40: #526070,
    50: #6a798a,
    60: #8493a4,
    70: #9eadbf,
    80: #b9c8db,
    90: #d5e4f7,
    95: #ecf4ff,
    98: #f8faff,
    99: #fdfcff,
    100: #ffffff,
  ),
  neutral: (
    0: #000000,
    4: #0c0e11,
    6: #111316,
    10: #1a1c1e,
    12: #1e2022,
    17: #282a2d,
    20: #2f3033,
    22: #333537,
    24: #37393c,
    25: #3a3c3f,
    30: #46474a,
    35: #515356,
    40: #5d5e62,
    50: #76777a,
    60: #8f9194,
    70: #aaabae,
    80: #c6c6c9,
    87: #d9d9dc,
    90: #e2e2e5,
    92: #e8e7eb,
    94: #eeeded,
    95: #f0f0f3,
    96: #f3f3f6,
    98: #f9f9fc,
    99: #fdfcff,
    100: #ffffff,
  ),
  neutral-variant: (
    0: #000000,
    10: #171c22,
    20: #2c3137,
    25: #373c42,
    30: #42474e,
    35: #4e535a,
    40: #5a5f66,
    50: #73787f,
    60: #8c9198,
    70: #a7acb3,
    80: #c3c7cf,
    90: #dfe3eb,
    95: #edf1f9,
    98: #f8faff,
    99: #fdfcff,
    100: #ffffff,
  ),
  error: (
    0: #000000,
    10: #410002,
    20: #690005,
    25: #7e0007,
    30: #93000a,
    35: #a80710,
    40: #ba1a1a,
    50: #de3730,
    60: #ff5449,
    70: #ff897d,
    80: #ffb4ab,
    90: #ffdad6,
    95: #ffedea,
    98: #fff8f7,
    99: #fffbff,
    100: #ffffff,
  ),
);

// Tertiary Orange Palette based on #ff9100
$chimp-orange-palette: (
  0: #000000,
  10: #2e1600,
  20: #4c2700,
  25: #5c3000,
  30: #6d3900,
  35: #7e4300,
  40: #8f4d00,
  50: #b26200,
  60: #d67800,
  70: #f79000,
  80: #ffb86c,
  90: #ffdcbe,
  95: #ffeedf,
  98: #fff8f5,
  99: #fffbff,
  100: #ffffff,
  secondary: (
    0: #000000,
    10: #251a0c,
    20: #3b2e1f,
    25: #47392a,
    30: #534434,
    35: #5f5040,
    40: #6c5c4b,
    50: #857463,
    60: #9f8e7c,
    70: #bba895,
    80: #d7c4b0,
    90: #f4e0cb,
    95: #ffeedf,
    98: #fff8f5,
    99: #fffbff,
    100: #ffffff,
  ),
  neutral: (
    0: #000000,
    4: #120d08,
    6: #17120c,
    10: #1f1b16,
    12: #231f1a,
    17: #2d2924,
    20: #34302a,
    22: #39342e,
    24: #3d3933,
    25: #403b35,
    30: #4c4640,
    35: #58524b,
    40: #645d57,
    50: #7d766f,
    60: #978f88,
    70: #b2aaa2,
    80: #cec5bd,
    87: #e1d8d0,
    90: #ebe1d9,
    92: #f0e7de,
    94: #f6ede4,
    95: #f9efe6,
    96: #fcf2e9,
    98: #fff8f5,
    99: #fffbff,
    100: #ffffff,
  ),
  neutral-variant: (
    0: #000000,
    10: #221b14,
    20: #382f28,
    25: #433a32,
    30: #4f453d,
    35: #5b5149,
    40: #675d54,
    50: #80756c,
    60: #9b8f85,
    70: #b6a99f,
    80: #d2c5ba,
    90: #efe1d5,
    95: #fdefE3,
    98: #fff8f5,
    99: #fffbff,
    100: #ffffff,
  ),
  error: (
    0: #000000,
    10: #410002,
    20: #690005,
    25: #7e0007,
    30: #93000a,
    35: #a80710,
    40: #ba1a1a,
    50: #de3730,
    60: #ff5449,
    70: #ff897d,
    80: #ffb4ab,
    90: #ffdad6,
    95: #ffedea,
    98: #fff8f7,
    99: #fffbff,
    100: #ffffff,
  ),
);

// ============================================================================
// DEFINE THE CHIMP THEME
// ============================================================================

$chimp-theme: mat.define-theme((
  color: (
    theme-type: light,
    primary: $chimp-blue-palette,
    tertiary: $chimp-orange-palette,
  ),
  typography: (
    brand-family: '"Nunito", "Roboto", sans-serif',
    plain-family: '"Nunito", "Roboto", sans-serif',
  ),
));

// ============================================================================
// CSS CUSTOM PROPERTIES FOR USE THROUGHOUT THE APP
// Designed for WCAG AA/AAA compliance with proper surface layering
// ============================================================================

:root {
  // ==========================================================================
  // SURFACE ELEVATION SYSTEM
  // Creates visual hierarchy for nested cards and containers
  // ==========================================================================
  
  // Page-level backgrounds
  --chimp-surface-dim: #d8e2ed;                    // Disabled/recessed areas
  --chimp-surface: #f5f8fc;                        // Main page background
  
  // Container hierarchy (use progressively for nested elements)
  --chimp-surface-container-lowest: #ffffff;       // Deeply nested content, inputs
  --chimp-surface-container-low: #eff4fa;          // Inner cards, nested sections
  --chimp-surface-container: #e9eff7;              // Primary cards on page
  --chimp-surface-container-high: #e3eaf3;         // Elevated cards, dropdowns
  --chimp-surface-container-highest: #dde5ef;      // Modals, dialogs, popovers

  // Surface with primary tint (for branded sections)
  --chimp-surface-tint: #054d8a;
  --chimp-primary-surface: rgba(5, 77, 138, 0.08);
  --chimp-primary-surface-variant: rgba(5, 77, 138, 0.12);

  // ==========================================================================
  // TEXT COLOR HIERARCHY - WCAG AAA Compliant
  // All ratios calculated against --chimp-surface-container-lowest (#ffffff)
  // ==========================================================================
  
  // Primary text - 15.4:1 contrast ratio (AAA)
  --chimp-on-surface: #111827;
  
  // Secondary text - 8.6:1 contrast ratio (AAA)
  --chimp-on-surface-variant: #404a5c;
  
  // Tertiary/hint text - 5.7:1 contrast ratio (AA, nearly AAA)
  --chimp-outline: #5c6679;
  
  // Decorative borders only - not for text
  --chimp-outline-variant: #c4cdd8;

  // ==========================================================================
  // PRIMARY BLUE - Brand Color with Accessibility
  // Base: #054d8a (7.3:1 on white - AAA compliant)
  // ==========================================================================
  
  --chimp-primary: #054d8a;
  --chimp-primary-light: #1a5a96;
  --chimp-primary-lighter: #4a82be;
  --chimp-primary-dark: #003a6b;
  --chimp-primary-darker: #001d36;
  
  // Primary containers for backgrounds
  --chimp-primary-container: #d1e4ff;
  --chimp-primary-container-low: #e5efff;
  
  // Text on primary colors
  --chimp-on-primary: #ffffff;
  --chimp-on-primary-container: #001d36;
  
  // Legacy aliases
  --chimp-primary-contrast: #ffffff;
  --chimp-primary-50: #e5efff;
  --chimp-primary-100: #d1e4ff;
  --chimp-primary-200: #a8c8f0;
  --chimp-primary-300: #689cd9;
  --chimp-primary-400: #4a82be;
  --chimp-primary-500: #054d8a;
  --chimp-primary-600: #003a6b;
  --chimp-primary-700: #003258;
  --chimp-primary-800: #001d36;
  --chimp-primary-900: #001024;

  // ==========================================================================
  // TERTIARY ORANGE - Accent Color with Accessibility
  // Note: Orange is problematic for text. Use darkened version for text.
  // Decorative use: #ff9100 (2.9:1 - icons/graphics only)
  // Text use: #8f4d00 (6.4:1 - AA compliant)
  // ==========================================================================
  
  --chimp-tertiary: #8f4d00;                       // For text (6.4:1)
  --chimp-tertiary-bright: #ff9100;                // For icons/decorative (3:1)
  --chimp-tertiary-container: #ffdcbe;
  --chimp-tertiary-container-low: #ffeedf;
  --chimp-on-tertiary: #ffffff;
  --chimp-on-tertiary-container: #2e1600;
  
  // Accent aliases (for compatibility)
  --chimp-accent: #ff9100;                         // Decorative only
  --chimp-accent-text: #8f4d00;                    // For text usage
  --chimp-accent-light: #ffb86c;
  --chimp-accent-lighter: #ffdcbe;
  --chimp-accent-dark: #b26200;
  --chimp-accent-darker: #8f4d00;
  --chimp-accent-contrast: #2e1600;
  --chimp-accent-50: #ffeedf;
  --chimp-accent-100: #ffdcbe;
  --chimp-accent-200: #ffb86c;
  --chimp-accent-300: #f79000;
  --chimp-accent-400: #ff9100;
  --chimp-accent-500: #d67800;
  --chimp-accent-600: #b26200;
  --chimp-accent-700: #8f4d00;
  --chimp-accent-800: #6d3900;
  --chimp-accent-900: #4c2700;

  // ==========================================================================
  // SEMANTIC COLORS - All WCAG AA Compliant for Text
  // Each has: main color, container, and on-container text
  // ==========================================================================
  
  // SUCCESS - Darker green for text accessibility (5.0:1)
  --chimp-success: #1a7f1f;
  --chimp-success-bright: #4caf50;                 // For icons/progress
  --chimp-success-light: #a5d6a7;
  --chimp-success-dark: #0d5c10;
  --chimp-success-container: #c8f4c8;
  --chimp-on-success: #ffffff;
  --chimp-on-success-container: #0d3d0f;
  // Legacy
  --chimp-success-bg: #c8f4c8;
  --chimp-success-text: #0d3d0f;
  
  // WARNING - Darkened for accessibility (6.1:1)
  --chimp-warning: #7a4f00;
  --chimp-warning-bright: #ff9800;                 // For icons only
  --chimp-warning-light: #ffd180;
  --chimp-warning-dark: #5c3b00;
  --chimp-warning-container: #ffeac2;
  --chimp-on-warning: #ffffff;
  --chimp-on-warning-container: #261900;
  // Legacy
  --chimp-warning-bg: #ffeac2;
  --chimp-warning-text: #261900;
  
  // ERROR - Slightly darker for accessibility (5.5:1)
  --chimp-error: #c41c1c;
  --chimp-error-bright: #f44336;                   // For icons
  --chimp-error-light: #ef9a9a;
  --chimp-error-dark: #8b0000;
  --chimp-error-container: #ffdad6;
  --chimp-on-error: #ffffff;
  --chimp-on-error-container: #410002;
  // Legacy
  --chimp-error-bg: #ffdad6;
  --chimp-error-text: #410002;
  
  // INFO - Already accessible (6.5:1)
  --chimp-info: #0b5caa;
  --chimp-info-bright: #2196f3;                    // For icons
  --chimp-info-light: #90caf9;
  --chimp-info-dark: #003d7a;
  --chimp-info-container: #d1e4ff;
  --chimp-on-info: #ffffff;
  --chimp-on-info-container: #001d36;
  // Legacy
  --chimp-info-bg: #d1e4ff;
  --chimp-info-text: #001d36;

  // ==========================================================================
  // NEUTRAL GRAY SCALE - Updated for better contrast
  // ==========================================================================
  
  --chimp-gray-50: #f8fafc;
  --chimp-gray-100: #f1f5f9;
  --chimp-gray-200: #e2e8f0;
  --chimp-gray-300: #cbd5e1;
  --chimp-gray-400: #94a3b8;
  --chimp-gray-500: #64748b;
  --chimp-gray-600: #475569;
  --chimp-gray-700: #334155;
  --chimp-gray-800: #1e293b;
  --chimp-gray-900: #0f172a;

  // ==========================================================================
  // LEGACY TEXT COLORS - Mapped to new accessible values
  // ==========================================================================
  
  --chimp-text-primary: var(--chimp-on-surface);
  --chimp-text-secondary: var(--chimp-on-surface-variant);
  --chimp-text-hint: var(--chimp-outline);
  --chimp-text-disabled: var(--chimp-outline-variant);
  --chimp-text-on-primary: var(--chimp-on-primary);
  --chimp-text-on-accent: var(--chimp-on-tertiary-container);

  // ==========================================================================
  // LEGACY BACKGROUND COLORS - Mapped to surface system
  // ==========================================================================
  
  --chimp-bg-primary: var(--chimp-surface-container-lowest);
  --chimp-bg-secondary: var(--chimp-surface);
  --chimp-bg-tertiary: var(--chimp-surface-container-low);
  --chimp-bg-card: var(--chimp-surface-container-lowest);
  --chimp-bg-dialog: var(--chimp-surface-container-highest);
  --chimp-bg-app-bar: var(--chimp-primary);

  // ==========================================================================
  // BORDER COLORS - Updated for proper contrast (3:1 minimum)
  // ==========================================================================
  
  --chimp-border-light: var(--chimp-outline-variant);
  --chimp-border-medium: #9ca8b8;
  --chimp-border-dark: var(--chimp-outline);
  
  // Functional borders
  --chimp-border-focus: var(--chimp-primary);
  --chimp-border-error: var(--chimp-error);

  // ==========================================================================
  // SHADOWS - Subtle, consistent elevation
  // ==========================================================================
  
  --chimp-shadow-color: 215 28% 17%;
  --chimp-shadow-light: hsl(var(--chimp-shadow-color) / 0.05);
  --chimp-shadow-medium: hsl(var(--chimp-shadow-color) / 0.1);
  --chimp-shadow-heavy: hsl(var(--chimp-shadow-color) / 0.2);
  
  // Elevation shadows (use with surface containers)
  --chimp-elevation-1: 0 1px 2px hsl(var(--chimp-shadow-color) / 0.05);
  --chimp-elevation-2: 0 2px 4px hsl(var(--chimp-shadow-color) / 0.08), 
                       0 1px 2px hsl(var(--chimp-shadow-color) / 0.04);
  --chimp-elevation-3: 0 4px 8px hsl(var(--chimp-shadow-color) / 0.1), 
                       0 2px 4px hsl(var(--chimp-shadow-color) / 0.06);
  --chimp-elevation-4: 0 8px 16px hsl(var(--chimp-shadow-color) / 0.12), 
                       0 4px 8px hsl(var(--chimp-shadow-color) / 0.08);

  // ==========================================================================
  // INTERACTIVE STATES
  // ==========================================================================
  
  --chimp-state-hover: rgba(5, 77, 138, 0.08);
  --chimp-state-focus: rgba(5, 77, 138, 0.12);
  --chimp-state-pressed: rgba(5, 77, 138, 0.16);
  --chimp-state-dragged: rgba(5, 77, 138, 0.20);

  // ==========================================================================
  // MISCELLANEOUS
  // ==========================================================================
  
  // Amber (for progress indicators)
  --chimp-amber: #ffc107;
  --chimp-amber-light: #ffd54f;
  --chimp-amber-dark: #ffa000;
  
  // Scrim/overlay
  --chimp-scrim: rgba(0, 0, 0, 0.4);
}

// ============================================================================
// APPLY THE THEME TO ALL COMPONENTS
// ============================================================================

html {
  @include mat.all-component-themes($chimp-theme);
}
